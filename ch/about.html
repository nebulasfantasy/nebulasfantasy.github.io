<!DOCTYPE html>
<html>
<title>Nebulas Fantasy</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma">
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/NF.css" rel="stylesheet">
<style>
    img {
        display: block;
        margin: auto;
    }

    .sectionTitle {
        font-weight: bold;
        padding: 20px;

    }

    ul {
        font-size: 16pt;
    }

    .content {
        font-size: 16pt;
        padding: 20px;
        margin-bottom: 30px;
    }
</style>

<body>


    <div class="container">
        <div class="w3-white w3-xlarge" style="max-width:1200px;">
            <div class="w3-bar">
                <a href="./index.html" class="w3-bar-item w3-button">主页</a>
                <a href="./players.html" class="w3-bar-item w3-button">我的球星卡</a>
                <a href="./market.html" class="w3-bar-item w3-button">购买球星</a>
                <a href="./leaderboard.html" class="w3-bar-item w3-button">积分榜</a>
                <a href="./about.html" class="w3-bar-item w3-button">介绍</a>
                <a href="" id="contractAddress" class="w3-bar-item w3-button">合约</a>
                <a href="../about.html" class="w3-bar-item w3-button" style="float:right">English</a>
                <span class="w3-bar-item" id="pool" style="float:right"></span>
            </div>
        </div>

        <header class="w3-display-container w3-content w3-wide" style="max-width:1600px" id="home">
            <img class="w3-image" src="../img/banner0.png">
        </header>



        <div class=class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px;font-family:Microsoft JhengHei">
            <h2 class="sectionTitle"> Nebulas Fantasy 是什么</h2>
            <div class="content">
                <p>Nebulas Fantasy 是在星云链上的去中心化应用(dAPP)。我们在星云链上搭建了一个2018世界杯范特西平台。球迷能够拥有在星云链上的世界杯球星，并根据球星在实际比赛中的表现而获得积分，最终分享抽卡奖池大奖!
                </p>
            </div>

            <br>
            <h2 class="sectionTitle"> Nebulas Fantasy 怎么玩</h2>
            <ul>
                <li>获得球星卡: 你可以通过花费一定的NAS获得Nebulas Fantasy上的球星卡。这一笔花费会自动进入奖池</li>
                <li>获得积分: 每个球星卡将根据该球星在实际比赛中的表现获得相应积分(比如上场时间，赢球，进球)</li>
                <li>获得奖励: 在世界杯结束以后，积分最高的50位球星卡的拥有者将分享奖池</li>
                <li>另外，您拥有的球星卡可以在星云链上自由交易(trade)和发送(transfer)</li>
            </ul>

            <br>
            <h2 class="sectionTitle"> Nebulas Fantasy 球星卡</h2>

            <div class="content">
                <p> 每个球星卡都是一个存在于星云链上的独立的NRC721 token。就像普通的token一样, 球星卡拥有者可以在星云链上查看自己球星卡的记录。球星卡可以在星云链上自由转移 </p>
                <p> 我们提供了三种办法来获得球星卡:
                    <ul>
                        <li> 1.抽取模式：花费较少，但球星随机，能力值随机
                            <a href="./index.html" target="_blank"> 立即抽取</a>
                        </li>
                        <li> 2.购买模式：花费中等，但可直选球星，能力值随机，点击进入
                            <a href="./market.html" target="_blank"> 购买球星</a>
                        </li>
                        <li> 3.自由市场(开发中)：向其他玩家购买其拥有的球星卡，在购买前，您可以看到该球星卡的能力值
                            <a href="#" target="_blank"> 自由市场</a>
                        </li>
                    </ul>
                    <p> 关于球星卡积分的规则在智能合约上锁定:</p>
                    <ul>
                        <li> 可以在世界杯结束前任意时刻获得球星卡。不过该球星卡无法获得在其被创造之前的积分 </li>
                        <li> 每个球星卡诞生时将被赋予（1-5）的天赋值</li>
                        <li> 每通过“抽取模式”产生50位球星卡,抽奖的成本将提高0.1NAS</li>
                        <li> 每通过“购买模式”产生1位球星卡,该球星的出售价格将上升0.02NAS </li>
                        <li> 每个球星卡将获得天赋×出场时间的积分 </li>
                        <li> 每个球星卡将额外获得100分的赢球奖励 </li>
                        <li> 每个球星卡将额外获得300分的进球奖励 </li>
                        <li> 综上所述，每张球星卡的最终得分 = 进球数×300+赢球数×100+出场时间×天赋 </li>
                    </ul>
            </div>

            <br>
            <h2 class="sectionTitle"> 奖励规则</h2>
            <div class="content">
                <p> 在世界杯结束以后，合约会自动按照球星卡的积分分享奖池 </p>
                <p> 以下分享规则制定在智能合约上:</p>
                <ul>
                    <li> Nebulas Fantasy 团队将获得10%的奖池作为管理费用</li>
                    <li> 总积分的前三名分别获得25%,15% 和10%的奖池 </li>
                    <li> 第4-10名平分15%奖池</li>
                    <li> 第11-30名平分15%奖池</li>
                    <li> 第30-50名平分剩余10%奖池</li>
                </ul>

            </div>
        </div>


        <footer class="w3-container w3-padding-64s w3-center w3-large">
            <p>Powered by Nebulas Fantasy Team</p>
            <p>nebulas.fantasy@gmail.com</p>
        </footer>





        <!-- End page content -->
    </div>
    <script src=../lib/jquery-3.3.1.min.js></script>
    <script src="../bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src=../lib/nebpay.js></script>
    <script src=../lib/nebulas.js></script>
    <script src='../address.js'></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script>
        var nebulas = require("nebulas"),
            neb = new nebulas.Neb();
        var NebPay = require("nebpay");
        var nebPay = new NebPay();
        var serialNumber;
        Account = nebulas.Account;
        var account;

        var mainnetUrl = "https://pay.nebulas.io/api/mainnet/pay",
            testnetUrl = "https://pay.nebulas.io/api/pay";

        var ownerAddress;
        var explorerTex, explorer, chainId, callbackUrl, NebHttpRequest;

        if (mainnet == false) { // test net
            // const contractAddress =  require("address");//"n1wtjL3KMVNTV3gsWhJibnNMmr6HJHKwBW2";
            ownerAddress = "n1RQYWMLqy1twJhfYxPk4SFx7wdfeq31pMX";
            NebHttpRequest = "https://testnet.nebulas.io";
            chainId = 1001; // test net
            callbackUrl = testnetUrl;
            explorerTx = "https://explorer.nebulas.io/#/testnet/tx/";
            explorer = "https://explorer.nebulas.io/#/testnet/address/";
        } else {
            // //main net 
            ownerAddress = "n1bveJ8tkb1DDECgHvknRFZesJqeaL2iKNt";
            NebHttpRequest = "https://mainnet.nebulas.io";
            chainId = 1; // mainnet net
            callbackUrl = mainnetUrl;
            explorerTx = "https://explorer.nebulas.io/#/mainnet/tx/";
            explorer = "https://explorer.nebulas.io/#/mainnet/address/";
        }

        neb.setRequest(new nebulas.HttpRequest(NebHttpRequest));
        $("#contractAddress").attr('href', explorer + contractAddress).attr('target', "_blank");


        function init() {
            console.log("in the initial function");
            getTotalPrize();
        }


        // check the prize pool
        function getTotalPrize() {
            var testcontract;
            var callJSONs = {
                from: ownerAddress, // get address string
                to: contractAddress, // get the contract string
                value: "0",
                nonce: 0,
                gasPrice: "200000",
                gasLimit: "1000000",
                contract: testcontract
            }

            // get the token Id owned by the address
            testcontract = {
                "function": "getPrizePool",
                "args": ""
            };
            callJSONs.contract = testcontract;
            neb.api.call(callJSONs)
                .then(function (resp) {
                    // $("#prize").show().text("Total prize pool:  " + String(parseInt(JSON.parse(resp.result)) / 1e18) + " NAS");
                    $("#pool").show().text(String(parseInt(JSON.parse(resp.result)) / 1e18) + " NAS in pool");
                })
        };


        $(window).load(function () {
            // executes when complete page is fully loaded, including all frames, objects and images
            // window.postMessage({
            // "target": "contentscript",
            // "data":{},
            // "method": "getAccount",
            // }, "*");

            // window.addEventListener('message', function(e) {
            //     if(!!e.data.data.account){
            //         account = e.data.data.account;
            //     } 
            //     // console.log(account)
            // });  

            init();
        });
    </script>

</body>

</html>